<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>S.T.O - 获取 SVG 信息</title>
	<link rel="stylesheet" href="contents/css/reset-1.3.3.css">
	<link rel="stylesheet" href="contents/css/layout.css">
</head>
<body>
	
	<header>
		<h1>S.T.O</h1>
		<button id="gen-info">Go</button>
	</header>

	<div class="input-area-mod">
		<textarea id="input-svg-box" placeholder="输入你的SVG代码"></textarea>
		<textarea id="output-svg-box" disabled=""></textarea>
	</div>

	<p></p>
	
	<div id="display-box"></div>

	<script src="contents/js/svgInfo.js"></script>
	<script type="text/javascript">
		// 创建一个svg用于取数据
		function createIframe() {
			let oldSVG = document.getElementById('svgbox');
			let svgBox = document.createElement('div');
			let inner  = document.getElementById('input-svg-box');
			let svgVal = inner.value;

			if ( svgVal === '输入你的SVG代码' ) {
				inner.focus();
				return;
			}

			if (oldSVG) oldSVG.remove();

			svgBox.id = 'svgbox';
			svgBox.innerHTML = inner.value;

			// 保存目前使用的数据
			localStorage.svg = svgVal;

			document.body.appendChild( svgBox );

			document.getElementById('output-svg-box').value = JSON.stringify( SvgInfo('svg'), '', '\t' )
		}

		// 点击事件
		document.getElementById('gen-info').addEventListener('click', createIframe, false);

		// 本地存储 SVG
		if (localStorage.svg) {
			document.getElementById('input-svg-box').value = localStorage.svg
		}
	</script>
</body>
</html>